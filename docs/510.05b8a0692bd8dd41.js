"use strict";(self.webpackChunkEcommerce=self.webpackChunkEcommerce||[]).push([[510],{9510:(P,h,r)=>{r.r(h),r.d(h,{ProductsComponent:()=>O});var l=r(6814),d=r(95),g=r(1120),c=r(6472),u=r(8129),o=r(530),t=r(4769),p=r(7903),E=r(6286),f=r(6968),T=r(2425);const M=function(_){return["/details",_]};function U(_,m){if(1&_){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"div",9,10),t.NdJ("click",function(){const n=t.CHM(e).$implicit,a=t.MAs(3),C=t.MAs(6),v=t.oxw();return t.KtG(v.addWish(n._id,a,C))}),t._UZ(4,"i",11),t.qZA(),t.TgZ(5,"div",12,13),t.NdJ("click",function(){const n=t.CHM(e).$implicit,a=t.MAs(3),C=t.MAs(6),v=t.oxw();return t.KtG(v.removeWish(n._id,a,C))}),t._UZ(7,"i",14),t.qZA(),t.TgZ(8,"div",15),t._UZ(9,"img",16),t.TgZ(10,"div",17)(11,"h4",18),t._uU(12),t.qZA(),t.TgZ(13,"h3",19),t._uU(14),t.ALo(15,"cuttext"),t.qZA(),t.TgZ(16,"div",20)(17,"span",21),t._uU(18),t.ALo(19,"currency"),t.qZA(),t.TgZ(20,"div",22),t._UZ(21,"i",23),t.TgZ(22,"span"),t._uU(23),t.qZA()()()()(),t.TgZ(24,"button",24),t.NdJ("click",function(){const n=t.CHM(e).$implicit,a=t.oxw();return t.KtG(a.addProduct(n._id))}),t._UZ(25,"i",25),t._uU(26," Add to cart "),t.qZA()()()}if(2&_){const e=m.$implicit;t.xp6(8),t.Q6J("routerLink",t.VKq(12,M,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH),t.xp6(3),t.hij(" ",e.category.name," "),t.xp6(2),t.Oqu(t.xi3(15,6,e.title,3)),t.xp6(4),t.Oqu(t.xi3(19,9,e.price,"EGP ")),t.xp6(5),t.hij(" ",e.ratingsAverage,"")}}const D=function(_,m,e){return{id:"productsPaginate",itemsPerPage:_,currentPage:m,totalItems:e}};let O=(()=>{class _{constructor(e,s,i,n,a){this._ProductsService=e,this._CartService=s,this._WishlistService=i,this._ToastrService=n,this._Renderer2=a,this.productsData=[],this.inputTerm="",this.pageSize=0,this.page=1,this.total=0}ngOnInit(){this._ProductsService.getProducts().subscribe({next:e=>{this.productsData=e.data,this.pageSize=e.metadata.limit,this.page=e.metadata.currentPage,this.total=e.results}})}pageChanged(e){this._ProductsService.getProducts(e).subscribe({next:s=>{this.productsData=s.data,this.pageSize=s.metadata.limit,this.page=s.metadata.currentPage,this.total=s.results}})}addProduct(e){this._CartService.addToCart(e).subscribe({next:s=>{this._CartService.cartNumber.next(s.numOfCartItems),this._ToastrService.success(s.message)}})}addWish(e,s,i){this._WishlistService.addToWishList(e).subscribe({next:n=>{this._WishlistService.wishCount.next(n.data.length),this._ToastrService.success(n.message),this._Renderer2.addClass(s,"d-none"),this._Renderer2.removeClass(i,"d-none")}})}removeWish(e,s,i){this._WishlistService.removeWishList(e).subscribe({next:n=>{this._ToastrService.success("Product removed successfully from your wishlist"),this._WishlistService.wishCount.next(n.data.length),this._Renderer2.addClass(i,"d-none"),this._Renderer2.removeClass(s,"d-none")}})}static#t=this.\u0275fac=function(s){return new(s||_)(t.Y36(p.H),t.Y36(E.N),t.Y36(f.m),t.Y36(T._W),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:9,vars:16,consts:[[1,"pt-5"],[1,"searchInput","w-75","mx-auto","mb-5"],["type","text","placeholder","search for products...",1,"form-control",3,"ngModel","ngModelChange"],[1,"row","g-4","row-cols-1","row-cols-sm-2","row-cols-md-3","row-cols-lg-3","row-cols-xl-4"],["class","col",4,"ngFor","ngForOf"],[1,"pagination","d-flex","justify-content-center","mt-5"],["id","productsPaginate","previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"my-pagination",3,"maxSize","directionLinks","autoHide","responsive","pageChange","pageBoundsCorrection"],[1,"col"],[1,"card","justify-content-around","align-items-center","p-2"],[1,"addWish-btn","main-color",3,"click"],["addWishBtn",""],[1,"fa-regular","fa-heart"],[1,"removeWish-btn","main-color","d-none",3,"click"],["removeWishBtn",""],[1,"fa-solid","fa-heart"],[3,"routerLink"],["alt","",1,"w-100",3,"src"],[1,"productDetails","p-1","pt-2"],[1,"small","main-color","fw-bolder"],[1,"small"],[1,"product-footer","small","d-flex","justify-content-between","align-items-center"],[1,""],[1,"rating"],[1,"fa-solid","fa-star","rating-color"],[1,"main-btn","small","card-btn","w-100",3,"click"],[1,"fa-solid","fa-plus"]],template:function(s,i){1&s&&(t.TgZ(0,"section",0)(1,"div",1)(2,"input",2),t.NdJ("ngModelChange",function(a){return i.inputTerm=a}),t.qZA()(),t.TgZ(3,"div",3),t.YNc(4,U,27,14,"div",4),t.ALo(5,"paginate"),t.ALo(6,"search"),t.qZA(),t.TgZ(7,"div",5)(8,"pagination-controls",6),t.NdJ("pageChange",function(a){return i.pageChanged(a)})("pageBoundsCorrection",function(a){return i.pageChanged(a)}),t.qZA()()()),2&s&&(t.xp6(2),t.Q6J("ngModel",i.inputTerm),t.xp6(2),t.Q6J("ngForOf",t.xi3(5,6,t.xi3(6,9,i.productsData,i.inputTerm),t.kEZ(12,D,i.pageSize,i.page,i.total))),t.xp6(4),t.Q6J("maxSize",9)("directionLinks",!0)("autoHide",!0)("responsive",!0))},dependencies:[l.ez,l.sg,l.H9,g.rH,u.r,c.JX,c._s,c.LS,d.u5,d.Fj,d.JJ,d.On,o.C]})}return _})()},6286:(P,h,r)=>{r.d(h,{N:()=>c});var l=r(5619),d=r(4769),g=r(9862);let c=(()=>{class u{constructor(t){this._HttpClient=t,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new l.X(0)}addToCart(t){return this._HttpClient.post(this.baseUrl+"cart",{productId:t})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}updateCartCount(t,p){return this._HttpClient.put(this.baseUrl+`cart/${t}`,{count:p})}removeCartItem(t){return this._HttpClient.delete(this.baseUrl+`cart/${t}`)}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(t,p){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${t}?url=http://localhost:4200`,{shippingAddrees:p})}getOrders(t){return this._HttpClient.get(this.baseUrl+`orders/user/${t}`)}static#t=this.\u0275fac=function(p){return new(p||u)(d.LFG(g.eN))};static#e=this.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},7903:(P,h,r)=>{r.d(h,{H:()=>g});var l=r(4769),d=r(9862);let g=(()=>{class c{constructor(o){this._HttpClient=o,this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}getProducts(o=1){return this._HttpClient.get(this.baseUrl+`products?page=${o}`)}getProductDetails(o){return this._HttpClient.get(this.baseUrl+`products/${o}`)}getCategories(){return this._HttpClient.get(this.baseUrl+"categories")}getCategroiesDetails(o){return this._HttpClient.get(this.baseUrl+`categories/${o}`)}getBrands(){return this._HttpClient.get(this.baseUrl+"brands")}getBrandDetails(o){return this._HttpClient.get(this.baseUrl+`brands/${o}`)}static#t=this.\u0275fac=function(t){return new(t||c)(l.LFG(d.eN))};static#e=this.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);