"use strict";(self.webpackChunkEcommerce=self.webpackChunkEcommerce||[]).push([[290],{5290:(v,l,s)=>{s.r(l),s.d(l,{CartComponent:()=>E});var d=s(6814),p=s(1120),C=s(8129),t=s(4769),o=s(6286);function b(i,m){1&i&&(t.TgZ(0,"div",4),t._UZ(1,"img",5),t.TgZ(2,"h3"),t._uU(3,"Your "),t.TgZ(4,"span",6),t._uU(5,"Cart"),t.qZA(),t._uU(6," Is Empty!"),t.qZA()())}function n(i,m){1&i&&(t.TgZ(0,"div",7)(1,"h3",8),t._uU(2,"Your "),t.TgZ(3,"span",6),t._uU(4,"Cart"),t.qZA()()())}function _(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"div",18)(1,"div",19),t._UZ(2,"img",20),t.qZA(),t.TgZ(3,"div",21)(4,"div",22)(5,"h3",23),t._uU(6),t.ALo(7,"cuttext"),t.qZA(),t.TgZ(8,"h4",24)(9,"span",14),t._uU(10,"Price: "),t.qZA(),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"button",25),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.removeItem(a.product._id))}),t._UZ(14,"i",26),t.TgZ(15,"span",27),t._uU(16," Remove"),t.qZA()()(),t.TgZ(17,"div",28)(18,"button",29,30),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.MAs(19),h=t.MAs(24),g=t.oxw(2);return t.KtG(g.changeCount(a.product._id,a.count+1,u,h))}),t._uU(20," + "),t.qZA(),t.TgZ(21,"span",31),t._uU(22),t.qZA(),t.TgZ(23,"button",29,32),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.MAs(19),h=t.MAs(24),g=t.oxw(2);return t.KtG(g.changeCount(a.product._id,a.count-1,u,h))}),t._uU(25," - "),t.qZA()()()()}if(2&i){const e=m.$implicit;t.xp6(2),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(4),t.Oqu(t.xi3(7,5,e.product.title,3)),t.xp6(5),t.hij("",t.xi3(12,8,e.price,"EGP ")," "),t.xp6(11),t.Oqu(e.count)}}const f=function(i){return["/payment",i]};function x(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"button",11),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.clear())}),t._UZ(3,"i",12),t._uU(4," Clear cart "),t.qZA()(),t.TgZ(5,"h4",13)(6,"span",14),t._uU(7,"Total Price: "),t.qZA(),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.YNc(10,_,26,11,"div",15),t.TgZ(11,"button",16),t._uU(12," Online payment "),t._UZ(13,"img",17),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(8),t.hij("",t.xi3(9,3,e.cartData.totalCartPrice,"EGP ")," "),t.xp6(2),t.Q6J("ngForOf",e.cartData.products),t.xp6(1),t.Q6J("routerLink",t.VKq(6,f,e.cartData._id))}}let E=(()=>{class i{constructor(e,r){this._CartService=e,this._Renderer2=r,this.cartData={},this.isEmpty=!0}ngOnInit(){this._CartService.getCartUser().subscribe({next:e=>{0==e.numOfCartItems?this.isEmpty=!0:(this.cartData=e.data,this.isEmpty=!1)}})}changeCount(e,r,c,a){r>=1&&(this._Renderer2.setAttribute(c,"disabled","true"),this._Renderer2.setAttribute(a,"disabled","true"),this._CartService.updateCartCount(e,r).subscribe({next:({data:u})=>{this.cartData=u,this._Renderer2.removeAttribute(c,"disabled"),this._Renderer2.removeAttribute(a,"disabled")}}))}removeItem(e){this._CartService.removeCartItem(e).subscribe({next:r=>{this.cartData=r.data,this._CartService.cartNumber.next(r.numOfCartItems),0==r.numOfCartItems&&(this.isEmpty=!0)}})}clear(){this._CartService.clearCart().subscribe({next:()=>{this.cartData={},this.isEmpty=!0,this._CartService.cartNumber.next(0)}})}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(o.N),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:4,vars:3,consts:[[1,"pt-5"],["class","cartCaption text-center",4,"ngIf"],["class","secTitle mb-4",4,"ngIf"],["class","bg-main-light p-5 rounded-2 shadow-sm",4,"ngIf"],[1,"cartCaption","text-center"],["src","./assets/images/empty_cart.svg","alt","",1,"w-100","emptyCart","my-5"],[1,"main-color"],[1,"secTitle","mb-4"],[1,"text-center"],[1,"bg-main-light","p-5","rounded-2","shadow-sm"],[1,"clearBtn","d-flex"],[1,"btn","btn-danger","rounded-pill","px-3","text-white","ms-auto",3,"click"],[1,"fa-solid","fa-trash-can"],[1,"h6","border-bottom","pb-4"],[1,"main-color","fw-bold"],["class","row border-bottom py-4",4,"ngFor","ngForOf"],[1,"main-btn","rounded-pill","px-3","mt-4",3,"routerLink"],["src","./assets/images/visa-1.svg","alt",""],[1,"row","border-bottom","py-4"],[1,"col-md-2"],["alt","",1,"w-100","img-thumbnail","mb-3","mb-md-0",3,"src","alt"],[1,"col-md-10","d-flex","justify-content-between","align-items-center"],[1,"product-data"],[1,"h5","fw-bold"],[1,"h6"],[1,"remove-btn","btn","ps-0","ms-0",3,"click"],[1,"fa-solid","fa-trash-can","main-color"],[1,""],[1,"product-count"],[1,"btn","btn-sm","main-border","fs-6",3,"click"],["plusBtn",""],[1,"px-2","fw-bold"],["minusBtn",""]],template:function(r,c){1&r&&(t.TgZ(0,"section",0),t.YNc(1,b,7,0,"div",1),t.YNc(2,n,5,0,"div",2),t.YNc(3,x,14,8,"div",3),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngIf",c.isEmpty),t.xp6(1),t.Q6J("ngIf",!c.isEmpty),t.xp6(1),t.Q6J("ngIf",!c.isEmpty))},dependencies:[d.ez,d.sg,d.O5,d.H9,p.rH,C.r],styles:[".emptyCart[_ngcontent-%COMP%]{max-width:400px}"]})}return i})()},6286:(v,l,s)=>{s.d(l,{N:()=>t});var d=s(5619),p=s(4769),C=s(9862);let t=(()=>{class o{constructor(n){this._HttpClient=n,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new d.X(0)}addToCart(n){return this._HttpClient.post(this.baseUrl+"cart",{productId:n})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}updateCartCount(n,_){return this._HttpClient.put(this.baseUrl+`cart/${n}`,{count:_})}removeCartItem(n){return this._HttpClient.delete(this.baseUrl+`cart/${n}`)}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(n,_){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${n}?url=http://localhost:4200`,{shippingAddrees:_})}getOrders(n){return this._HttpClient.get(this.baseUrl+`orders/user/${n}`)}static#t=this.\u0275fac=function(_){return new(_||o)(p.LFG(C.eN))};static#e=this.\u0275prov=p.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})()}}]);