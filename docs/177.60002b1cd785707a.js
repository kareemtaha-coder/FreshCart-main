"use strict";(self.webpackChunkEcommerce=self.webpackChunkEcommerce||[]).push([[177],{5177:(_,l,r)=>{r.r(l),r.d(l,{PaymentComponent:()=>e});var u=r(6814),s=r(95),t=r(4769),m=r(1120),i=r(6286);function h(o,p){1&o&&t._UZ(0,"i",14)}let e=(()=>{class o{constructor(a,n,c){this._FormBuilder=a,this._ActivatedRoute=n,this._CartService=c,this.cartId="",this.isLoading=!1,this.checkOutForm=this._FormBuilder.group({details:[""],phone:[""],city:[""]})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:a=>{this.cartId=a.get("id")}})}submitForm(){this.isLoading=!0,this._CartService.checkOut(this.cartId,this.checkOutForm.value).subscribe({next:n=>{this.isLoading=!1,window.open(n.session.url,"_self")}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(s.qu),t.Y36(m.gz),t.Y36(i.N))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-payment"]],standalone:!0,features:[t.jDz],decls:22,vars:2,consts:[[1,"pt-5"],[1,"secTitle","mb-3"],[1,"text-center"],[1,"main-color"],[1,"w-75","mx-auto","bg-main-light","p-5","rounded-2","shadow-sm",3,"formGroup","ngSubmit"],[1,"form-floating","mb-2"],["type","text","id","details","formControlName","details","placeholder","details",1,"form-control"],["for","details"],["type","tel","id","phone","formControlName","phone","placeholder","phone",1,"form-control"],["for","phone"],["type","text","id","city","formControlName","city","placeholder","city",1,"form-control"],["for","city"],["type","submit",1,"main-btn","rounded-pill","px-3"],["class","fa-solid fa-circle-notch fa-spin",4,"ngIf"],[1,"fa-solid","fa-circle-notch","fa-spin"]],template:function(n,c){1&n&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h3",2),t._uU(3,"Checkout "),t.TgZ(4,"span",3),t._uU(5,"Now"),t.qZA()()(),t.TgZ(6,"form",4),t.NdJ("ngSubmit",function(){return c.submitForm()}),t.TgZ(7,"div",5),t._UZ(8,"input",6),t.TgZ(9,"label",7),t._uU(10,"Details:"),t.qZA()(),t.TgZ(11,"div",5),t._UZ(12,"input",8),t.TgZ(13,"label",9),t._uU(14,"Phone:"),t.qZA()(),t.TgZ(15,"div",5),t._UZ(16,"input",10),t.TgZ(17,"label",11),t._uU(18,"City:"),t.qZA()(),t.TgZ(19,"button",12),t._uU(20," Check out "),t.YNc(21,h,1,0,"i",13),t.qZA()()()),2&n&&(t.xp6(6),t.Q6J("formGroup",c.checkOutForm),t.xp6(15),t.Q6J("ngIf",c.isLoading))},dependencies:[u.ez,u.O5,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]})}return o})()},6286:(_,l,r)=>{r.d(l,{N:()=>m});var u=r(5619),s=r(4769),t=r(9862);let m=(()=>{class i{constructor(e){this._HttpClient=e,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new u.X(0)}addToCart(e){return this._HttpClient.post(this.baseUrl+"cart",{productId:e})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}updateCartCount(e,o){return this._HttpClient.put(this.baseUrl+`cart/${e}`,{count:o})}removeCartItem(e){return this._HttpClient.delete(this.baseUrl+`cart/${e}`)}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(e,o){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${e}?url=http://localhost:4200`,{shippingAddrees:o})}getOrders(e){return this._HttpClient.get(this.baseUrl+`orders/user/${e}`)}static#t=this.\u0275fac=function(o){return new(o||i)(s.LFG(t.eN))};static#e=this.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()}}]);